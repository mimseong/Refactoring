# CHAPTER 06. 기본적인 리팩터링

* 저자가 가장 많이 사용하는 리팩터링은 **함수 추출하기**와 **변수 추출**하기지만 반대로 진행하는 **함수 인라인**하기, **변수 인라인하기**도 자주 사용한다.   
* 추출은 이름 짓기며, **함수 선언 바꾸기**는 함수의 이름을 변경할 때 많이 쓰인다. 
* 함수의 인수를 추가하거나 제거할 때도 리팩터링 적용한다. 
  * 바꿀 대상이 변수라면 **변수 이름 바꾸기**를 사용하는데 이는 **변수 캡슐화하기**와 관련이 깊다. 
  * 자주 함께 뭉쳐다니는 인수들은 **매개변수 객체 만들기**를 적용해 하나의 객체로 묶으면 편리할 때가 많다. 
* 함수를 만들고 나면 다시 고수준 모듈로 묶어야 한다. 
  * 함수를 그룹으로 묶을 때는 **여러 함수를 클래스로 묶기**를 사용한다. 이때 함수들이 사용하는 데이터도 클래스로 함께 묶는다.
  * 읽기전용 데이터를 다룰 때는 **여러 함수를 변환 함수로 묶기**가 좋다. 
  * 조금 더 나아가 저자는 모듈의 작업 처리 과정을 명확한 단계로 구분 짓는 **단계 쪼개기**를 적용할 때도 많다. 

## 6.1 함수 추출하기 [^1]
언제 함수로 묶어야 할까?
* 함수 길이(ex. 함수 하나가 한 화면을 넘어가면 안 된다)
* 두 번 이상 사용될 코드일 경우(재사용성)
* 코드를 파악하는 데 시간이 걸릴 경우 (목적과 구현 분리하기)
  * 함수명은 '무슨 일'에 걸맞게 짓기
  * '어떻게'가 아닌 **'무엇을'** 하는지가 드러나도록.

🧸 함수를 짧게 만들면 캐싱하기가 더 쉬워 컴파일러가 최적화하는 데 유리할 때가 많다.   

~~솔루션을 기준으로 생각했을 때 여러 기관에서 다양한 형식을 요구할 걸 대비해서 옵션을 줄 수 있도록 함수로 뺀다고 생각하면 되는걸까,,~~

## 6.2 함수 인라인하기 [^2]
* 함수 본문이 이름만큼 명확한 경우나 함수 본문 코드를 이름만큼 깔끔하게 리팩터링했을 때는 함수를 제거한다. (쓸데없는 간접 호출은 거슬릴 뿐)
* 리팩터링 과정에서 잘못 추출된 함수들도 다시 인라인한다. (= 원래 함수로 합친 후 필요에 의해 원하는 형태로 다시 추출하는 것.)
* 간접 호출, 즉 단순히 위임하기만 하는 함수들도 인라인해버린다.    

👉 함수 인라인하기는 유용한 것만 남기고 나머지는 제거할 수 있다.    

## 6.3 변수 추출하기 [^3]
* 표현식이 복잡해서 이해하기 어려울 때는 지역 변수를 활용하면 단계마다 이름을 붙일 수 있어 더 쉽게 관리할 수 있다. 
* 이 과정에서 추가한 변수는 breakpoint를 지정하거나 상태를 출력하는 문장을 추가할 수 있어 디버깅에도 도움이 된다. 
* 함수 안에서만 의미가 있다면 변수로 추출하는 것이 좋으나 넓은 문맥에서까지 의미가 된다면 넓은 범위에서 통용되는 이름을 생각해야 한다. 즉, 변수가 아닌 함수로 추출해야 한다. 

🧸 객체는 특정 로직과 데이터를 외부와 공유하려 할 때 공유할 정보를 설명해주는 적당한 크기의 문맥이 되어준다.   
따라서 덩치가 큰 클래스에서 공통 동작을 별도 이름으로 뽑아내서 추상화해두면 그 객체를 다룰 때 쉽게 활용할 수 있어서 매우 유용하다. 

## 6.4 변수 인라인하기 [^4]
* 변수는 함수에서 표현식을 가리키는 이름으로 쓰인다.
* 변수가 주변 코드를 리팩터링하는 데 방해가 된다면 그 변수를 인라인하는 것이 좋다. 

## 6.5 함수 선언 바꾸기 [^5]

[^1]: ↔ 함수 인라인하기 , [예시](https://refactoring.com/catalog/extractFunction.html)
[^2]: ↔ 함수 추출하기, [예시](https://refactoring.com/catalog/inlineFunction.html)
[^3]: ↔ 변수 인라인하기, [예시](https://refactoring.com/catalog/extractVariable.html)
[^4]: ↔ 변수 추출하기, [예시](https://refactoring.com/catalog/inlineVariable.html)
[^5]: = 함수 이름 바꾸기, 시그니처 바꾸기, [예시](https://refactoring.com/catalog/changeFunctionDeclaration.html)
