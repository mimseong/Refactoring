
# Chapter 08 기능 이동

> 요소를 다른 컨텍스트로 옮기는 일, 즉 기능이동 역시 리팩터링의 중요한 축이다.

## 8.1 함수 옮기기

- 모듈성: 모듈화가 잘 되어있는 정도? 프로그램의 어딘가를 수정하려할 때, 해당 기능과 깊이 관련된 작은 일부분만 이해해도 수정할 수 있게 해주는 능력.

- 모듈성을 높이려면...
  - 서로 연관된 요소들을 함께 묶기
  - 요소 사이의 연결 관계를 쉽게 찾고 이해할 수 있게 하기

함수 옮기기 예시)
- 어떤 함수가 속한 모듈 A의 요소보다 모듈 B의 요소를 더 많이 참조한다면, 모듈 B로 옮기자.
  - 이 경우 캡슐화가 좋아져서, 이 소프트웨어의 나머지 부분은 모듈 B의 세부사항에 덜 의존하게 된다.
- 다른 함수 안에서 도우미 역할로 정의된 함수 중 독립적으로도 고유한 가치가 있는 것은 접근하기 더 쉬운 장소로 옮기는 게 낫다.

- 함수를 옮길지 말지 결정해야할 때는 대상 함수의 현재 컨텍스트와 후보 컨텍스트를 둘러보자.
 - 대상 함수를 호출하는 함수들은 무엇인지
 - 대상 함수가 호출하는 함수들은 무엇인지
 - 대상 함수가 사용하는 데이터는 무엇인지

- 서로 관련된 여러 함수를 묶을 새로운 컨텍스트가 필요할 때는
  - 여러함수로 묶기
  - 클래스 추출하기

## 8.2 필드 옮기기

데이터 구조가 적절하지 않음을 깨달았다면 바로 수정해야한다.
고치지 않고 남겨진 코드는 머릿속을 혼란스럽게 하고 훗날 작성하게될 코드를 더욱 복잡하게 만들 것이다.

- 함수에 항상 함께 건제니는 데이터 조각들은 상호 관계가 명확하게 드러나도록 **한 레코드에 담는 게** 좋다.
- 한 레코트를 변경하려할 때, 다른 레코드의 필드까지 변경해아한다면 필드의 위치가 잘못되었다는 것이다.
- 구조체 여러 개에 정의된 똑같은 필드들을 갱신해야한다면, 한번만 갱신해도 되는 위치로 옮겨야 한다.



